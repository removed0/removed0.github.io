<!doctype html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta content="width=device-width, initial-scale=1" name="viewport">
   <title>arch page</title>
   <link href="https://raw.githubusercontent.com/removed0/removed0.github.io/main/media/favicon.ico" rel="shortcut icon">
   <meta content="https://github.com/removed0/" name="author">
   <meta content="im gonna install arch" name="description">
   <style>
      details {
         padding-left: 2px;
         border-style: solid;
         border-color: lightgray;
         border-radius: 3px;
         border-width: 2px;
      }

      a:link {
         color: green;
         text-decoration: none;
      }

      a:visited {
         color: rgb(20, 95, 20);
         text-decoration: none;
      }

      a:hover {
         text-decoration: underline;
      }
   </style>
</head>

<body style="background-color: #151515; color: white; font-size: larger;">
   <h2><strong>this is a very opinionated arch install command list for a pc with around 16gb of ram and a 2004 or newer intel processor with no graphics card in it</strong></h2>
   <details>
      <summary>preinstallation</summary>
      <pre>
<a href="https://soundcloud.com/removed0" rel="noreferrer noopener">my soundcloud</a>
download the arch iso and the arch iso pgp signature from <a href="https://archlinux.org/download/" rel="noreferrer noopener">archlinux.org</a>

in the same directory as the iso and signature, verify integrity:
gpg --keyserver-options auto-key-retrieve --verify archlinux-&lt;<i>version</i>&gt;-x86_64.iso.sig

before installation disable secure boot and set the CMOS clock to UTC
      </pre>
   </details>
   <pre>
to follow this guide in the iso: 
{
   press ALT+F2 to go into the second tty
   {
      lynx removed0.github.io/arch_install.html
   }
   switch back to the first tty: ALT+F1
} // you have 7 ttys // useful

ls /sys/firmware/efi/efivars // if it lists files it means you've booted in UEFI mode, which is needed

if you need to connect to wifi // better use wired
{
   iwctl
   device list
   station &lt;<i>device</i>&gt; scan
   station &lt;<i>device</i>&gt; get-networks
   station &lt;<i>device</i>&gt; connect &lt;<i>network</i>&gt;
   exit
}

ping -c4 archlinux.org // if it doesn't work, fix it lmao

lsblk
fdisk &lt;<i>disk</i>&gt;
   g
   w

cfdisk &lt;<i>disk</i>&gt;
partition 1. 512M, efi system
partition 2. 8G, swap
partition 3. rest of disk, linux filesystem

lsblk
mkfs.ext4 &lt;<i>root_partition</i>&gt; // Ex./dev/nvme0n1p3
mkfs.fat -F32 &lt;<i>efi_partition</i>&gt;
mkswap &lt;<i>swap_partition</i>&gt;

mount &lt;<i>root_partition</i>&gt; /mnt // YOU MUST MOUNT THIS FIRST
mount --mkdir &lt;<i>efi_partition</i>&gt; /mnt/boot
swapon &lt;<i>swap_partition</i>&gt;

pacstrap -K /mnt base linux-zen linux-firmware linux-firmware-qlogic which nano intel-ucode networkmanager
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab

nano /mnt/etc/fstab
{
   the root partition &lt;<i>options</i>&gt; should have noatime,commit=30
}

arch-chroot /mnt

ln -sf /usr/share/zoneinfo/&lt;<i>Region</i>&gt;/&lt;<i>City</i>&gt; /etc/localtime // zoneinfo/Europe/Bucharest
hwclock -w

nano /etc/pacman.conf
{
   comment Checkspace // if you have enough space
   uncomment [multilib]
   uncomment Color
   ParallelDownloads 4
}

systemctl enable NetworkManager

nano /etc/locale.gen
{
   uncomment en_US.UTF-8 UTF-8
}
locale-gen
echo LANG=en_US.UTF-8 &gt; /etc/locale.conf

echo &lt;<i>hostname</i>&gt; &gt; /etc/hostname
   </pre>
   <details>
      <summary>bootloader</summary>
      <pre>
bootctl install
systemctl enable systemd-boot-update

blkid &lt;<i>root_partition</i>&gt; // Ex. /dev/sda3
nano /boot/loader/entries/arch.conf
{
   title   arch linux
   linux   /vmlinuz-linux-zen
   initrd  /intel-ucode.img
   initrd  /initramfs-linux-zen.img
   options root=&lt;<i>UUID</i>&gt; rw nowatchdog // &lt;<i>UUID</i>&gt; should look like: UUID=6d3376e4-fc93-4509-95ec-a21d68011da2 // add mitigations=off if you want to trade security for performance
}

echo default arch &gt; /boot/loader/loader.conf
      </pre>
   </details>
   <pre>

passwd // set root password
exit
reboot

nano /etc/security/limits.conf
{
   * soft nproc 150
   * hard nproc 250
}

nano /etc/sysctl.d/custom.conf
{
   vm.swappiness = 20
   vm.vfs_cache_pressure = 70
   vm.dirty_background_ratio = 4
   vm.dirty_ratio = 4
   vm.min_free_kbytes = 1100000
   net.ipv6.icmp.echo_ignore_all = 1
   net.ipv4.icmp_echo_ignore_all = 1 
   net.ipv4.tcp_rfc1337 = 1
   net.ipv4.tcp_fastopen = 3
   net.ipv4.tcp_mtu_probing = 1
   kernel.kexec_load_disabled = 1
}

nano /etc/NetworkManager/conf.d/rand_mac.conf
{
   [connection-mac-randomization]

   ethernet.cloned-mac-address=random
   wifi.cloned-mac-address=random
}

nano /etc/NetworkManager/NetworkManager.conf
{
   [connection]
   ipv6.ip6-privacy=2
}

nano /etc/makepkg.conf
{
   CFLAGS="-march=native" // delete mtune
   MAKEFLAGS="-j$(nproc-1)"
   RUSTFLAGS="-C target-cpu=native"
}

// nmtui // if you need wifi
   </pre>
   <details>
      <summary>after install (WIP)</summary>
      <pre>
pacman -Syu opendoas
nano /etc/doas.conf
{
   permit :wheel
   permit setenv { XAUTHORITY LANG LC_ALL } :wheel

}

chown -c root:root /etc/doas.conf
chmod -c 0400 /etc/doas.conf

ln -s $(which doas) /usr/bin/sudo

useradd -m -G wheel &lt;<i>username</i>&gt;
passwd &lt;<i>username</i>&gt;
su &lt;<i>username</i>&gt;

cd ~
nano .bashrc
{
   alias sudoedit='doas rnano'
   alias shutdown='shutdown now'
   complete -cf doas
}

// always login as normal user
reboot

sudo pacman -Syu --needed git base-devel rustup // uwufetch
^14 // no sudo 

rustup default stable
git clone https://aur.archlinux.org/paru.git 
cd paru
makepkg -si

sudo echo Limit=80 &gt;&gt; /etc/paru.conf

paru aic94xx-firmware // weird bug if all on same line??? PARU HAS ISSUE WITH MINUS SIGN IN NAME.
paru upd72020x-fw
paru wd719x-firmware
// if mkinitcpio -P not run, run it

reboot

sudo pacman -Syu intel-media-driver vulkan-intel mesa libva-utils
reboot

vainfo
// if it doesn't work you might need to do this
// sudo echo LIBVA_DRIVER_NAME=iHD >> /etc/environment

// paru -Rn libva-utils // if you want
      </pre>
      <details>
         <summary>audio (WIP)</summary>
         <pre>
sudo pacman -Syu pipewire pipewire-{pulse,jack}

cp /usr/share/pipewire/{client,pipewire-pulse,pipewire}.conf ~/.config/pipewire/

sudo nano ~/.config/pipewire/pipewire.conf
{
   default.clock.allowed-rates = [ 44800 44100 ]

   on line 242, next to context.exec add: { path = "pactl" args = "load-module module-switch-on-connect" }
}

sudo nano ~/.config/pipewire/client.conf
{
   resample.quality = 8
}

sudo nano ~/.config/pipewire/pipewire-pulse.conf
{
   resample.quality = 8
}
         </pre>
      </details>
      <h2>bad from here, bad bad</h2>
      <pre>
sudo pacman -Syu xorg-server xorg-xinit xfce4 xfce4-goodies htop bluez code network-manager-applet transmission-gtk
xfce ^14 // no user guide
xfce-goodies ^30 // no task manager

// if you install xf86-video-intel // enables vsync or smth like that
{
   nano /etc/X11/xorg.conf.d/20-intel.conf
   {
      Section "Device"
      Identifier "Intel Graphics"
      Driver "intel"
      Option "TearFree" "true"
      EndSection
   }
}

// nano ~/.drirc // BAD // might improve performance
{
   &lt;driconf&gt;
   &lt;device&gt;
   &lt;application name="Default"&gt;
   &lt;option name="vblank_mode" value="0" /&gt;
   &lt;/application&gt;
   &lt;/device&gt;
   &lt;/driconf&gt;
}

nano /etc/X11/xorg.conf.d/50-mouse-acceleration.conf // disable mouse acceleration
{
   Section "InputClass"
   Identifier "My Mouse"
   MatchIsPointer "yes"
   Option "AccelerationProfile" "-1"
   Option "AccelerationScheme" "none"
   Option "AccelSpeed" "-1"
   EndSection
}

nano ~/.xinitrc
{
   startxfce4
}

nano ~/.bash_profile
{
   if [ -z "${DISPLAY}" ] && [ "${XDG_VTNR}" -eq 1 ]; then
      exec startx
   fi
}

sudo nano /etc/systemd/system/getty@tty1.service.d/autologin.conf
{
   Environment=XDG_SESSION_TYPE=x11
   Type=simple
   [Service]
   ExecStart=
   ExecStart=-/sbin/agetty -o '-p -f -- \\u' --noclear --autologin username %I $TERM
}

paru librewolf-bin
<a href="https://wiki.archlinux.org/title/General_recommendations" rel="noreferrer noopener">General recommendations</a>
      </pre>
   </details>
</body>

</html>