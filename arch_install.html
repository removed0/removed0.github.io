<!doctype html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta content="width=device-width, initial-scale=1" name="viewport">
   <title>arch page</title>
   <link href="https://raw.githubusercontent.com/removed0/removed0.github.io/main/media/favicon.ico" rel="shortcut icon">
   <meta content="https://github.com/removed0/" name="author">
   <meta content="im gonna install arch" name="description">
   <style>
      body {
         background-color: #151515;
         color: white;
         font-size: 110%;
      }

      a:link {
         color: green;
         text-decoration: none;
      }

      a:visited {
         color: #145F14;
         text-decoration: none;
      }

      a:hover {
         text-decoration: underline;
      }
   </style>
</head>

<body>
   <hr>
   <pre>
preinstallation

<a href="https://soundcloud.com/removed0" rel="noreferrer noopener">my soundcloud</a>
download the arch iso and the arch iso pgp signature from <a href="https://archlinux.org/download/" rel="noreferrer noopener">archlinux.org</a>

in the same directory as the iso and signature, verify integrity:
$ gpg --keyserver-options auto-key-retrieve --verify archlinux-&lt;<i>version</i>&gt;-x86_64.iso.sig

before installation disable secure boot and set the CMOS clock to UTC
   <hr>
boot into the iso

$ ls /sys/firmware/efi/efivars
if it lists files it means you've booted in UEFI mode, which is needed

if you can't use a wired internet connection you can connect to wifi
$ iwctl
$ device list
$ station &lt;<i>device</i>&gt; scan
$ station &lt;<i>device</i>&gt; get-networks
$ station &lt;<i>device</i>&gt; connect &lt;<i>network</i>&gt;
$ exit

to follow this guide in the iso, press ALT+F2 to go into the second tty and then do
$ lynx removed0.github.io/arch_install.html
switch back to the first tty using ALT+F1
you have 7 ttys at your disposal, you can switch to them using ALT+F&lt;<i>number</i>&gt;

check your internet connection using
$ ping -c4 archlinux.org
if it doesn't work, fix it

list all storage devices and partitions
$ lsblk

&lt;<i>disk</i>&gt; is formated like /dev/nvme0n1 or /dev/sda

this makes a new gpt partition table on &lt;<i>disk</i>&gt;, erases all partitions on &lt;<i>disk</i>&gt;
$ fdisk &lt;<i>disk</i>&gt;
   g  make partition table
   w  write changes and exit

use cfdisk to create 3 partitions
# cfdisk &lt;<i>disk</i>&gt;
partition 1. 300M, efi system                boot partition, this has the bootloader and the linux kernel
partition 2. 8G, swap                        swap partition
partition 3. rest of disk, linux filesystem  normal files

this lists the partitions on disk
# lsblk /dev/&lt;<i>disk</i>&gt;
these three commands make the partitions
# mkfs.ext4 &lt;<i>root_partition</i>&gt; // &lt;<i>root_partition</i>&gt; should look like /dev/nvme0n1p3 or /dev/sda1
# mkfs.fat -F32 &lt;<i>efi_partition</i>&gt;
# mkswap &lt;<i>swap_partition</i>&gt;

these commands mount the partitions so that we can use them
# mount &lt;<i>root_partition</i>&gt; /mnt
# mount --mkdir &lt;<i>efi_partition</i>&gt; /mnt/boot
# swapon &lt;<i>swap_partition</i>&gt;

this command installs essential packages, such as the kernel, device firmware, tui text editor, processor microcode and a network manager
# pacstrap -K /mnt base linux-zen linux-firmware linux-firmware-qlogic which nano intel-ucode networkmanager

this command creates the fstab, which contains necessary information to automate the process of mounting partitions
# genfstab -U /mnt &gt;&gt; /mnt/etc/fstab

arch-chroot /mnt

for better disk performance, delete relatime from the root partition options and add noatime,commit=30, WITH NO SPACE inbetween the options
nano /etc/fstab
{
   #  &lt;file system&gt;                     &lt;mount point&gt;       &lt;type&gt;  &lt;options&gt;             &lt;dump&gt; &lt;pass&gt;
   UUID=5173525b-f631-4652-9088-db2116a46769 /              ext4    defaults,noatime,commit=15 0 1
                                                                             ^^^^^^^^ relatime was here
}

sets the localtime
# ln -sf /usr/share/zoneinfo/&lt;<i>Region</i>&gt;/&lt;<i>City</i>&gt; /etc/localtime
# hwclock -w                 ^ Ex. zoneinfo/Europe/Bucharest

make the network manager start at boot
# systemctl enable NetworkManager

uncomment en_US.UTF-8 UTF-8 from /etc/locale.gen
# nano /etc/locale.gen
{
   en_US.UTF-8 UTF-8
   ^ # was here
}

idk what this does
# locale-gen
# echo LANG=en_US.UTF-8 &gt; /etc/locale.conf

set computer name
# echo &lt;<i>hostname</i>&gt; &gt; /etc/hostname
<hr>
bootloader

installs the bootloader to /boot
# bootctl install
enables bootloader updates
# systemctl enable systemd-boot-update

in the third tty (ALT+F3) do
# blkid &lt;<i>root_partition</i>&gt;
to get the &lt;<i>UUID</i>&gt; of the root partition

then make a file to tell the bootloader about our system
# nano /boot/loader/entries/arch.conf
{
   title   arch linux
   linux   /vmlinuz-linux-zen
   initrd  /intel-ucode.img
   initrd  /initramfs-linux-zen.img
   options root=UUID=&lt;<i>UUID</i>&gt; rw nowatchdog // &lt;<i>UUID</i>&gt; being: random letters with slashes in-between // add mitigations=off to the options if you want to trade security for performance
}

duplicate the file, changing the file name...
# cp /boot/loader/entries/arch.conf /boot/loader/entries/archfall.conf

and the name of the entry and the initramfs
# nano /boot/loader/entries/archfall.conf
{
   title   arch linux (fallback initramfs)
   initrd  /initramfs-linux-zen-fallback.img
}
we do this so that if the system doesn't boot due to a missing module, we can use this, by holding a key during boot we can see this option

# echo default arch &gt; /boot/loader/loader.conf

set the root password
# passwd
exit the chroot environment
# exit
reboot into the installed system
# reboot
   <hr>
after install (WIP)
# cd /etc

speeds up download and makes output more pretty and enables 32bit packages
nano pacman.conf
{
   // comment Checkspace // if you have enough space
   uncomment [multilib]
   uncomment Color
   ILoveCandy
   ParallelDownloads 4
}

security, limits the number of open processes, no forkbombs
to increase the number of allowed processes at a time do: # prlimit --nproc=&lt;<i>number</i>&gt;, &lt;<i>number</i>&gt; being less then 1001
# nano security/limits.conf
{
   * soft nproc 850
   * hard nproc 1200
}

kernel parameters for better performance
# nano sysctl.d/custom.conf
{
   vm.swappiness = 25
   vm.vfs_cache_pressure = 70
   vm.dirty_background_ratio = 5
   vm.dirty_ratio = 4
   vm.min_free_kbytes = 790000
   tcp_slow_start_after_idle = 0
   net.ipv4.icmp_echo_ignore_all = 1
   net.ipv4.tcp_rfc1337 = 1
   net.ipv4.tcp_fastopen = 3
   net.ipv4.tcp_mtu_probing = 1       
   net.ipv4.tcp_keepalive_time = 80
   net.ipv4.tcp_keepalive_intvl = 10
   net.ipv4.tcp_keepalive_probes = 4
   net.ipv4.conf.default.rp_filter = 1
   net.ipv4.conf.all.rp_filter = 1
   net.ipv4.conf.all.accept_redirects = 0
   net.ipv4.conf.default.accept_redirects = 0
   net.ipv4.conf.all.secure_redirects = 0
   net.ipv4.conf.default.secure_redirects = 0
   net.ipv4.conf.all.send_redirects = 0
   net.ipv4.conf.default.send_redirects = 0
   net.ipv6.icmp.echo_ignore_all = 1   
   net.ipv6.conf.all.accept_redirects = 0
   net.ipv6.conf.default.accept_redirects = 0
   kernel.kptr_restrict = 2
   kernel.kexec_load_disabled = 1
}

make network manager use random mac for connecting to network, better privacy
# nano NetworkManager/conf.d/rand_mac.conf
{
   [connection-mac-randomization]

   ethernet.cloned-mac-address=random
   wifi.cloned-mac-address=random
}

enables ipv6 privacy extensions by default
# nano NetworkManager/NetworkManager.conf
{
   [connection]
   ipv6.ip6-privacy=2
}

makes compiliation faster, more optimized apps
# nano makepkg.conf
{
   CFLAGS="-march=native" // delete mtune
   RUSTFLAGS="-O -C target-cpu=native"
   MAKEFLAGS="-j3"
   BUILDDIR=/tmp/makepkg
   PKGDEST=/home/mkpkgpackages
   SRCDEST=/home/mkpkgsources
}

if you need to connect to wifi
# nmtui
 
sudo lightweight replacement
# pacman -Syu opendoas

allow users in the wheel group to use doas without password (due to nopass options)
# nano doas.conf
{
   permit nopass setenv { XAUTHORITY LANG LC_ALL } :wheel
// new line at the end
}

set the correct permisions
# chown -c root:root doas.conf
# chmod -c 0400 doas.conf

make a symbolic link to sudo from doas
# ln -s $(which doas) /usr/bin/sudo

make user, and add it to wheel group
# useradd -m -G wheel &lt;<i>username</i>&gt;
set user password
# passwd &lt;<i>username</i>&gt;
login to user
# su &lt;<i>username</i>&gt;

go to home directory
# cd
yes .bashrc
$ nano .bashrc
{
   alias ..='cd ..'
   alias cd..='cd ..'
   alias ...='cd ../..'
   alias cd...='cd ../..'
   alias sudoedit='doas rnano'
   alias shutdown='shutdown now'
   alias diff='diff --color=auto'
   complete -cf doas
   bind '"\e[A":history-search-backward'
   bind '"\e[B":history-search-forward'
   PS1='\[\e[0m\][\[\e[0;36m\]\u\[\e[0m\]] \[\e[0;33m\]\w \[\e[0m\]\$ \[\e[0m\]'

   export LESS='-R --use-color -Dd+r$Du+b'
}

from now on always login as normal user
$ reboot

install packages for compiling paru (aur helper)
$ sudo pacman -S --needed git base-devel rustup // uwufetch
   ^14 // no sudo since we have doas

install rust toolchain
$ rustup default stable
clone paru
$ git clone https://aur.archlinux.org/paru.git
$ cd paru
make the package and install it
$ makepkg -si

limit the number of results to 140
$ sudo echo Limit=70 &gt;&gt; /etc/paru.conf

install more firmware
$ paru aic94xx-firmware // weird bug if all on same line??? PARU HAS ISSUE WITH MINUS SIGN IN NAME.
$ paru wd719x-firmware
$ paru upd72020x-fw
if mkinitcpio -P not run at the end, run it

$ reboot

install gpu drivers
$ sudo pacman -S intel-media-driver vulkan-intel mesa libva-utils
$ reboot

check in vaapi works
vainfo
// if it doesn't work you might need to do this: sudo echo LIBVA_DRIVER_NAME=iHD >> /etc/environment

you can delete libva-utils if you want: paru -Rn libva-utils
   <hr>
audio (WIP)

install audio packages
$ sudo pacman -S pipewire pipewire-{pulse,jack}
   2 // wireplumber

mkdir .config
mkdir .config/pipewire
cp /usr/share/pipewire/pipewire.conf .config/pipewire/

nano .config/pipewire/pipewire.conf
{
   default.clock.allowed-rates = [ 44800 44100 ] // do pw-top see number add, while music
   on line 242, next to context.exec add: { path = "pactl" args = "load-module module-switch-on-connect" }
}

// paru easyeffects // see <a href="https://github.com/jaakkopasanen/AutoEq" rel="norefferer nofollow">AutoEq</a> for collection of ai generated eq presets for headphones // testing
   <hr>
      <h2>bad from here</h2>

sudo pacman -S xorg-server xorg-xinit xfce4 // xfce4-goodies htop bluez code network-manager-applet transmission-gtk
// xfce-goodies ^30 // no task manager

// if you install xf86-video-intel // enables vsync or smth like that
{
   nano /etc/X11/xorg.conf.d/20-intel.conf
   {
      Section "Device"
      Identifier "Intel Graphics"
      Driver "intel"
      Option "TearFree" "true"
      EndSection
   }
}

// nano ~/.drirc // BAD // might improve performance // disables vsync??
{
   &lt;driconf&gt;
   &lt;device&gt;
   &lt;application name="Default"&gt;
   &lt;option name="vblank_mode" value="0" /&gt;
   &lt;/application&gt;
   &lt;/device&gt;
   &lt;/driconf&gt;
}

// nano /etc/X11/xorg.conf.d/50-mouse-acceleration.conf // disables mouse acceleration
{
   Section "InputClass"
   Identifier "My Mouse"
   MatchIsPointer "yes"
   Option "AccelerationProfile" "-1"
   Option "AccelerationScheme" "none"
   Option "AccelSpeed" "-1"
   EndSection
}

reboot

cp /etc/X11/xinit/xinitrc ~/.xinitrc
nano .xinitrc
{
   delete twm, xorg-xclock, xterm lines
   only exec startxfce4 should start
}

nano .bash_profile
{
   if [ -z "${DISPLAY}" ] && [ "${XDG_VTNR}" -eq 1 ]; then
   exec startx
   fi
}

sudo nano /etc/systemd/system/getty@tty1.service.d/autologin.conf
{
   Environment=XDG_SESSION_TYPE=x11
   Type=simple
   [Service]
   ExecStart=
   ExecStart=-/sbin/agetty -o '-p -f -- \\u' --noclear --autologin &lt;<i>username</i>&gt; %I $TERM
}

// paru librewolf-bin
<a href="https://wiki.archlinux.org/title/General_recommendations" rel="noreferrer noopener">General recommendations</a>
<hr>
</body>

</html>